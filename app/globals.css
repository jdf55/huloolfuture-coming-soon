@tailwind base;
@tailwind components;
@tailwind utilities;

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ═══════════════════════════════════════════════════════════════
   DESIGN TOKENS
   ─────────────────────────────────────────────────────────────
   Neutrals ......... HSL   (legible, easy grays and off-whites)
   Chromatic ........ OKLCH (perceptually uniform — accent, etc.)
   Shadows .......... full box-shadow shorthand via --shadow-*
   Gradient stops ... --bg-start / --bg-mid / --bg-end

   Theming:
     Class-based  →  body.dark-theme  /  body.light-theme
     System pref  →  @media (prefers-color-scheme: dark) fallback
   The class selectors (specificity 0-1-1) always beat :root
   (specificity 0-1-0), so the toggle will just add/remove a
   body class without touching any component styles.
═══════════════════════════════════════════════════════════════ */

/* ─── Light theme (default) ─────────────────────────────────── */
:root {
  /* Background */
  --bg:               hsl(72 18% 96%);
  --bg-elevated:      hsl(72 18% 96% / 0.88);
  --bg-start:         hsl(72 20% 97%);
  --bg-mid:           hsl(72 18% 96%);
  --bg-end:           hsl(78 16% 95%);

  /* Surface */
  --surface:          hsl(0 0% 100% / 0.82);
  --surface-solid:    hsl(0 0% 100%);
  --surface-muted:    hsl(0 0% 100% / 0.64);

  /* Text */
  --text-strong:      hsl(221 47% 12%);         /* #101828 */
  --text-main:        hsl(213 34% 20%);         /* #253142 */
  --text-muted:       hsl(210 14% 42%);         /* #5f6c7b */
  --text-soft:        hsl(210 10% 55%);         /* #7f8997 */

  /* Border / line */
  --border:           hsl(221 47% 12% / 0.16);
  --line:             hsl(221 47% 12% / 0.16);
  --grid-dot:         hsl(221 47% 12% / 0.24);

  /* Accent — teal */
  --accent:           oklch(0.596 0.126 183);   /* #0d9488 */
  --accent-strong:    oklch(0.508 0.105 184);   /* #0f766e */
  --accent-end:       oklch(0.422 0.085 185);   /* #115e59 */
  --accent-soft:      oklch(0.596 0.126 183 / 0.14);
  --accent-rgb:       13, 148, 136;             /* rgba() compat for radial gradients */

  /* Premium — amber */
  --premium:          oklch(0.637 0.162 76);    /* #ca8a04 */
  --premium-soft:     oklch(0.637 0.162 76 / 0.17);
  --premium-rgb:      202, 138, 4;              /* rgba() compat for radial gradients */

  /* Semantic states */
  --success:          oklch(0.484 0.131 164);   /* #047857 */
  --success-soft:     oklch(0.484 0.131 164 / 0.12);
  --success-border:   oklch(0.484 0.131 164 / 0.30);

  /* Ambient orbs */
  --orb-1:            oklch(0.596 0.126 183 / 0.04);
  --orb-2:            oklch(0.637 0.162 76  / 0.03);

  /* Shadows — full box-shadow shorthand */
  --shadow-card:      0 14px 30px -24px hsl(221 47% 12% / 0.28);
  --shadow-cta:       0 18px 36px -28px hsl(221 47% 12% / 0.34);
  --shadow-toggle:    0 1px 3px hsl(221 47% 12% / 0.12);

  /* Feature icon tones (light) */
  --feat-icon-0-bg:   oklch(0.979 0.021 166);    /* ≈ emerald-50  */
  --feat-icon-0:      oklch(0.490 0.120 165);    /* ≈ emerald-700 */
  --feat-icon-1-bg:   oklch(0.984 0.014 180);    /* ≈ teal-50     */
  --feat-icon-1:      oklch(0.488 0.104 184);    /* ≈ teal-700    */
  --feat-icon-2-bg:   oklch(0.991 0.018 90);     /* ≈ amber-50    */
  --feat-icon-2:      oklch(0.558 0.158 51);     /* ≈ amber-700   */
  --feat-icon-3-bg:   oklch(0.968 0.005 253);    /* ≈ slate-100   */
  --feat-icon-3:      oklch(0.376 0.030 258);    /* ≈ slate-700   */

  /* Watermark */
  --watermark:        oklch(0.245 0.050 258 / 0.03);

  /* On-primary (text on accent-gradient buttons) */
  --on-primary:       hsl(220 48% 10%);
}

/* ─── Dark theme — class-based ──────────────────────────────── */
/*   Applied by JS on body when prefers-color-scheme: dark, or   */
/*   by a future theme toggle. Overrides :root via specificity.  */
body.dark-theme {
  /* Background */
  --bg:               hsl(220 45% 8%);
  --bg-elevated:      hsl(220 45% 8% / 0.82);
  --bg-start:         hsl(220 47% 9%);
  --bg-mid:           hsl(220 45% 8%);
  --bg-end:           hsl(220 42% 7%);

  /* Surface */
  --surface:          hsl(218 46% 10% / 0.72);
  --surface-solid:    hsl(218 46% 10%);         /* #0e1623 */
  --surface-muted:    hsl(219 40% 11% / 0.58);

  /* Text */
  --text-strong:      hsl(220 43% 97%);         /* #f5f7fb */
  --text-main:        hsl(220 38% 90%);         /* #dde4ef */
  --text-muted:       hsl(213 14% 68%);         /* #9eaaba */
  --text-soft:        hsl(213 11% 55%);         /* #7b8898 */

  /* Border / line */
  --border:           hsl(210 20% 72% / 0.22);
  --line:             hsl(210 20% 72% / 0.22);
  --grid-dot:         hsl(213 29% 89% / 0.32);

  /* Accent — bright teal */
  --accent:           oklch(0.793 0.113 181);   /* #2dd4bf */
  --accent-strong:    oklch(0.700 0.120 182);   /* #14b8a6 */
  --accent-end:       oklch(0.508 0.105 184);   /* #0f766e */
  --accent-soft:      oklch(0.793 0.113 181 / 0.20);
  --accent-rgb:       45, 212, 191;

  /* Premium — bright amber */
  --premium:          oklch(0.835 0.161 81);    /* #fbbf24 */
  --premium-soft:     oklch(0.835 0.161 81 / 0.20);
  --premium-rgb:      251, 191, 36;

  /* Semantic states */
  --success:          oklch(0.793 0.140 162);   /* #34d399 */
  --success-soft:     oklch(0.793 0.140 162 / 0.14);
  --success-border:   oklch(0.793 0.140 162 / 0.32);

  /* Ambient orbs */
  --orb-1:            oklch(0.700 0.120 182 / 0.07);
  --orb-2:            oklch(0.835 0.161 81  / 0.05);

  /* Shadows */
  --shadow-card:      0 16px 34px -24px hsl(220 54% 3% / 0.54);
  --shadow-cta:       0 18px 38px -26px hsl(220 54% 3% / 0.60);
  --shadow-toggle:    0 1px 3px hsl(220 54% 2% / 0.48);

  /* Feature icon tones (dark) */
  --feat-icon-0-bg:   oklch(0.490 0.120 165 / 0.15); /* emerald-500/15 */
  --feat-icon-0:      oklch(0.844 0.110 164);         /* ≈ emerald-300  */
  --feat-icon-1-bg:   oklch(0.488 0.104 184 / 0.15); /* teal-500/15    */
  --feat-icon-1:      oklch(0.862 0.110 183);         /* ≈ teal-300     */
  --feat-icon-2-bg:   oklch(0.769 0.162 72  / 0.15); /* amber-500/15   */
  --feat-icon-2:      oklch(0.886 0.126 87);          /* ≈ amber-300    */
  --feat-icon-3-bg:   oklch(0.710 0.020 258 / 0.15); /* slate-400/15   */
  --feat-icon-3:      oklch(0.938 0.009 253);         /* ≈ slate-200    */

  /* Watermark */
  --watermark:        oklch(1 0 0 / 0.03);

  /* On-primary */
  --on-primary:       hsl(220 48% 10%);
}

/* ─── Light lock — prevents system dark from overriding ─────── */
/*   Set body.light-theme to force light even on a dark system.  */
body.light-theme {
  --bg:               hsl(72 18% 96%);
  --bg-elevated:      hsl(72 18% 96% / 0.88);
  --bg-start:         hsl(72 20% 97%);
  --bg-mid:           hsl(72 18% 96%);
  --bg-end:           hsl(78 16% 95%);
  --surface:          hsl(0 0% 100% / 0.82);
  --surface-solid:    hsl(0 0% 100%);
  --surface-muted:    hsl(0 0% 100% / 0.64);
  --text-strong:      hsl(221 47% 12%);
  --text-main:        hsl(213 34% 20%);
  --text-muted:       hsl(210 14% 42%);
  --text-soft:        hsl(210 10% 55%);
  --border:           hsl(221 47% 12% / 0.16);
  --line:             hsl(221 47% 12% / 0.16);
  --grid-dot:         hsl(221 47% 12% / 0.24);
  --accent:           oklch(0.596 0.126 183);
  --accent-strong:    oklch(0.508 0.105 184);
  --accent-end:       oklch(0.422 0.085 185);
  --accent-soft:      oklch(0.596 0.126 183 / 0.14);
  --accent-rgb:       13, 148, 136;
  --premium:          oklch(0.637 0.162 76);
  --premium-soft:     oklch(0.637 0.162 76 / 0.17);
  --premium-rgb:      202, 138, 4;
  --success:          oklch(0.484 0.131 164);
  --success-soft:     oklch(0.484 0.131 164 / 0.12);
  --success-border:   oklch(0.484 0.131 164 / 0.30);
  --orb-1:            oklch(0.596 0.126 183 / 0.04);
  --orb-2:            oklch(0.637 0.162 76  / 0.03);
  --shadow-card:      0 14px 30px -24px hsl(221 47% 12% / 0.28);
  --shadow-cta:       0 18px 36px -28px hsl(221 47% 12% / 0.34);
  --shadow-toggle:    0 1px 3px hsl(221 47% 12% / 0.12);

  /* Feature icon tones (light) */
  --feat-icon-0-bg:   oklch(0.979 0.021 166);
  --feat-icon-0:      oklch(0.490 0.120 165);
  --feat-icon-1-bg:   oklch(0.984 0.014 180);
  --feat-icon-1:      oklch(0.488 0.104 184);
  --feat-icon-2-bg:   oklch(0.991 0.018 90);
  --feat-icon-2:      oklch(0.558 0.158 51);
  --feat-icon-3-bg:   oklch(0.968 0.005 253);
  --feat-icon-3:      oklch(0.376 0.030 258);

  /* Watermark */
  --watermark:        oklch(0.245 0.050 258 / 0.03);

  /* On-primary */
  --on-primary:       hsl(220 48% 10%);
}

/* ─── System dark preference fallback (no class set) ─────────── */
/*   Keeps prefers-color-scheme working before a toggle is added. */
@media (prefers-color-scheme: dark) {
  :root {
    --bg:               hsl(220 45% 8%);
    --bg-elevated:      hsl(220 45% 8% / 0.82);
    --bg-start:         hsl(220 47% 9%);
    --bg-mid:           hsl(220 45% 8%);
    --bg-end:           hsl(220 42% 7%);
    --surface:          hsl(218 46% 10% / 0.72);
    --surface-solid:    hsl(218 46% 10%);
    --surface-muted:    hsl(219 40% 11% / 0.58);
    --text-strong:      hsl(220 43% 97%);
    --text-main:        hsl(220 38% 90%);
    --text-muted:       hsl(213 14% 68%);
    --text-soft:        hsl(213 11% 55%);
    --border:           hsl(210 20% 72% / 0.22);
    --line:             hsl(210 20% 72% / 0.22);
    --grid-dot:         hsl(213 29% 89% / 0.32);
    --accent:           oklch(0.793 0.113 181);
    --accent-strong:    oklch(0.700 0.120 182);
    --accent-end:       oklch(0.508 0.105 184);
    --accent-soft:      oklch(0.793 0.113 181 / 0.20);
    --accent-rgb:       45, 212, 191;
    --premium:          oklch(0.835 0.161 81);
    --premium-soft:     oklch(0.835 0.161 81 / 0.20);
    --premium-rgb:      251, 191, 36;
    --success:          oklch(0.793 0.140 162);
    --success-soft:     oklch(0.793 0.140 162 / 0.14);
    --success-border:   oklch(0.793 0.140 162 / 0.32);
    --orb-1:            oklch(0.700 0.120 182 / 0.07);
    --orb-2:            oklch(0.835 0.161 81  / 0.05);
    --shadow-card:      0 16px 34px -24px hsl(220 54% 3% / 0.54);
    --shadow-cta:       0 18px 38px -26px hsl(220 54% 3% / 0.60);
    --shadow-toggle:    0 1px 3px hsl(220 54% 2% / 0.48);

    /* Feature icon tones (dark) */
    --feat-icon-0-bg:   oklch(0.490 0.120 165 / 0.15);
    --feat-icon-0:      oklch(0.844 0.110 164);
    --feat-icon-1-bg:   oklch(0.488 0.104 184 / 0.15);
    --feat-icon-1:      oklch(0.862 0.110 183);
    --feat-icon-2-bg:   oklch(0.769 0.162 72  / 0.15);
    --feat-icon-2:      oklch(0.886 0.126 87);
    --feat-icon-3-bg:   oklch(0.710 0.020 258 / 0.15);
    --feat-icon-3:      oklch(0.938 0.009 253);

    /* Watermark */
    --watermark:        oklch(1 0 0 / 0.03);

    /* On-primary */
    --on-primary:       hsl(220 48% 10%);
  }
}

/* ═══════════════════════════════════════════════════════════════
   BASE
═══════════════════════════════════════════════════════════════ */

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  font-family: var(--font-inter), system-ui, sans-serif;
  background: var(--bg);
  color: var(--text-main);
}

/* ═══════════════════════════════════════════════════════════════
   LAYOUT COMPONENTS
═══════════════════════════════════════════════════════════════ */

/* ── Page background with ambient orbs ── */
.theme-root {
  background-color: var(--bg);
  background-image:
    radial-gradient(960px circle at 0% 0%, rgba(var(--accent-rgb), 0.06) 0%, transparent 58%),
    radial-gradient(840px circle at 100% 12%, rgba(var(--premium-rgb), 0.05) 0%, transparent 56%);
  background-repeat: no-repeat;
}

@media (max-width: 640px) {
  .theme-root {
    background-image:
      radial-gradient(420px circle at 0% 0%, rgba(var(--accent-rgb), 0.05) 0%, transparent 60%),
      radial-gradient(360px circle at 100% 16%, rgba(var(--premium-rgb), 0.04) 0%, transparent 58%);
  }
}

/* Dark: stronger orb glow + adjusted geometry */
@media (prefers-color-scheme: dark) {
  .theme-root {
    background-image:
      radial-gradient(960px circle at 0% 0%, rgba(var(--accent-rgb), 0.11) 0%, transparent 58%),
      radial-gradient(860px circle at 100% 14%, rgba(var(--premium-rgb), 0.09) 0%, transparent 56%);
  }
}

body.dark-theme .theme-root {
  background-image:
    radial-gradient(960px circle at 0% 0%, rgba(var(--accent-rgb), 0.11) 0%, transparent 58%),
    radial-gradient(860px circle at 100% 14%, rgba(var(--premium-rgb), 0.09) 0%, transparent 56%);
}

@media (prefers-color-scheme: dark) and (max-width: 640px) {
  .theme-root {
    background-image:
      radial-gradient(420px circle at 0% 0%, rgba(var(--accent-rgb), 0.09) 0%, transparent 60%),
      radial-gradient(380px circle at 100% 16%, rgba(var(--premium-rgb), 0.07) 0%, transparent 58%);
  }
}

@media (max-width: 640px) {
  body.dark-theme .theme-root {
    background-image:
      radial-gradient(420px circle at 0% 0%, rgba(var(--accent-rgb), 0.09) 0%, transparent 60%),
      radial-gradient(380px circle at 100% 16%, rgba(var(--premium-rgb), 0.07) 0%, transparent 58%);
  }
}

/* ── RTL font override ── */
[dir='rtl'],
[dir='rtl'] * {
  font-family: system-ui, -apple-system, sans-serif;
  letter-spacing: 0 !important;
}

/* ═══════════════════════════════════════════════════════════════
   ANIMATIONS
═══════════════════════════════════════════════════════════════ */

@keyframes float-blob {
  0%,
  100% {
    transform: translate(0, 0) scale(1);
  }
  33% {
    transform: translate(44px, -36px) scale(1.08);
  }
  66% {
    transform: translate(-32px, 24px) scale(0.96);
  }
}

@keyframes float-blob-2 {
  0%,
  100% {
    transform: translate(0, 0) scale(1);
  }
  50% {
    transform: translate(-48px, -40px) scale(1.08);
  }
}

@keyframes fade-up {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes ping-ring {
  0% {
    transform: scale(1);
    opacity: 0.85;
  }
  100% {
    transform: scale(2.3);
    opacity: 0;
  }
}

/* ── Disable animations on mobile ── */
@media (max-width: 640px) {
  [style*='fade-up'],
  [style*='fade-in'],
  [style*='float-blob'],
  [style*='float-blob-2'],
  [style*='ping-ring'] {
    animation: none !important;
  }
}

/* ═══════════════════════════════════════════════════════════════
   UTILITY COMPONENTS
═══════════════════════════════════════════════════════════════ */

/* ── Dot grid ── */
.dot-grid {
  background-image: radial-gradient(circle, var(--grid-dot) 1px, transparent 1px);
  background-size: 40px 40px;
  opacity: 0.06;
}

@media (max-width: 640px) {
  .dot-grid {
    opacity: 0.04;
    background-size: 36px 36px;
  }
}

@media (prefers-color-scheme: dark) {
  .dot-grid {
    opacity: 0.12;
  }
}

body.dark-theme .dot-grid {
  opacity: 0.12;
}

/* ── Headline gradient ── */
.headline-gradient {
  color: var(--accent);
  background: none;
  -webkit-text-fill-color: currentColor;
}

/* ── Glass nav / footer ── */
.glass-chrome {
  background: var(--bg-elevated);
  border-color: var(--border);
  backdrop-filter: blur(14px);
}

/* ── Cards ── */
.surface-card {
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow-card);
}

.surface-soft {
  border: 1px solid var(--border);
  background: var(--surface-muted);
}

.pro-surface {
  border: 1px solid rgba(var(--accent-rgb), 0.45);
  background: var(--surface);
  box-shadow:
    var(--shadow-card),
    inset 0 1px 0 rgba(var(--accent-rgb), 0.26);
}

.cta-surface {
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow-cta);
}

/* ── Rule lines ── */
.rule-line {
  height: 1px;
  background: var(--line);
}

/* ── Text helpers ── */
.muted-copy  { color: var(--text-muted); }
.soft-copy   { color: var(--text-soft); }
.accent-copy { color: var(--accent); }

/* ── Email input ── */
.email-input {
  border: 1px solid var(--border);
  background: var(--surface-solid);
  color: var(--text-strong);
}

.email-input::placeholder {
  color: var(--text-soft);
}

.email-input:focus {
  border-color: rgba(var(--accent-rgb), 0.72);
  box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.12);
}

@media (prefers-color-scheme: dark) {
  .email-input {
    background: oklch(1 0 0 / 0.04);
  }
}

body.dark-theme .email-input {
  background: oklch(1 0 0 / 0.04);
}

/* ── Notify button ── */
.notify-btn {
  border: 1px solid rgba(var(--accent-rgb), 0.38);
  background: var(--accent);
  box-shadow: 0 10px 22px -16px rgba(var(--accent-rgb), 0.64);
  transition: transform 0.16s ease, box-shadow 0.16s ease, filter 0.16s ease;
}

.notify-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  filter: brightness(1.03);
  box-shadow: 0 14px 24px -18px rgba(var(--accent-rgb), 0.68);
}

.notify-btn:active:not(:disabled) {
  transform: scale(0.97);
}

.notify-btn:focus-visible {
  outline: 2px solid rgba(var(--accent-rgb), 0.66);
  outline-offset: 2px;
}

/* ── Accent link ── */
.accent-link {
  color: var(--accent);
  text-decoration-color: rgba(var(--accent-rgb), 0.34);
}

.accent-link:hover {
  color: var(--text-strong);
  text-decoration-color: rgba(var(--accent-rgb), 0.62);
}

/* ── Feature icon tones ── */
.feat-icon-0 { background-color: var(--feat-icon-0-bg); color: var(--feat-icon-0); }
.feat-icon-1 { background-color: var(--feat-icon-1-bg); color: var(--feat-icon-1); }
.feat-icon-2 { background-color: var(--feat-icon-2-bg); color: var(--feat-icon-2); }
.feat-icon-3 { background-color: var(--feat-icon-3-bg); color: var(--feat-icon-3); }

/* ── Watermark ── */
.watermark-text { color: var(--watermark); }

/* ── On-primary (text on accent-gradient buttons) ── */
.on-primary { color: var(--on-primary); }

/* ── Theme toggle — focus ring ── */
.theme-toggle-btn {
  color: var(--text-muted);
}

.theme-toggle-btn.is-active {
  background: var(--surface-solid);
  color: var(--accent);
  box-shadow: var(--shadow-toggle);
}

.theme-toggle-btn:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}
